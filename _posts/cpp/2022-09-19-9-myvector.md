---
#layout: posts
excerpt: ""
title: "[C++] ğŸ“‚. vector<T> ì‹¤ìŠµ"

categories:
    - cpp
# tag:
#     [cpp, c++, oop]

toc_label: "ëª©ì°¨"
toc: true
toc_sticky: true

date: 2022-09-18
last_modified_at: 2022-09-18
---

# vector<T> ì§ì ‘ ë§Œë“¤ì–´ ë³´ê¸°
## 1. í…œí”Œë¦¿ í´ë˜ìŠ¤ ìƒì„±í•˜ê¸°
```c++
#include <iostream>
using namespace std;

template <typename T>
class my_vector
{
	// TODO
};
```

## 2. ê°€ì§€ê³  ìˆëŠ” ë°ì´í„° ì„¤ì •
```c++
private:
	T*	_data = nullptr;	// ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ë°°ì—´ì˜ ì‹œì‘ ì£¼ì†Œ
	int _size = 0;			// ì›ì†Œì˜ ê°œìˆ˜
	int _capacity = 0;		// ë²¡í„°ì˜ ìš©ëŸ‰
```

## 3. ìƒì„±ì ë° ì†Œë©¸ì
```c++
public: 
	my_vector()
	{
	}

	~my_vector()
	{
		if (_data)
			delete[] _data;	// ë°ì´í„°ê°€ ì¡´ì¬í•˜ë©´ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•œë‹¤.
	}
```

## 4. ì œê³µ í•¨ìˆ˜
1. `reserve`
- ë²¡í„°ì˜ capacityë¥¼ ì„¤ì •í•´ ì£¼ëŠ” í•¨ìˆ˜ (ë§¤ê°œë³€ìˆ˜ê°€ í˜„ì¬ capacity ì´í•˜ë©´ ë™ì‘ í•˜ì§€ ì•ŠìŒ)
- í˜„ì¬ capacityë¥¼ ë³€ê²½í•˜ê³  ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ë°›ì•„ ì›ì†Œë¥¼ ë³µì‚¬í•œë‹¤.
```c++
public:
	void reserve(int capacity)
		{
			if (capacity <= _capacity)
				return;

			SetCapacity(capacity);		
		}
```

2. `push_back`
- ë²¡í„°ì˜ ë§¨ ë§ˆì§€ë§‰ì— ì›ì†Œë¥¼ ì¶”ê°€í•´ ì£¼ëŠ” í•¨ìˆ˜
- capacityì™€ sizeì˜ ê°’ì´ ê°™ë‹¤ë©´ capacityë¥¼ 1.5ë°° ì¦ê°€ ì‹œí‚¨ë‹¤.
```c++
public:
	void push_back(const T& value)
	{
		if (_size == _capacity)
		{
			int newCapacity = static_cast<int>(_capacity * 1.5);
			if (_size == newCapacity)
				++newCapacity;

			reserve(newCapacity);
		}

		_data[_size++] = value;
	}
```

3. `pop_back`
- ë²¡í„°ì˜ ë§¨ ë§ˆì§€ë§‰ ì›ì†Œë¥¼ ì‚­ì œí•´ ì£¼ëŠ” í•¨ìˆ˜
```c++
public:
	void pop_back()
		{
			--_size;	// ì›ì†Œì˜ ê°œìˆ˜ë§Œ ì¤„ì—¬ì¤€ë‹¤.
		}
```

4. `clear`
- ëª¨ë“  ì›ì†Œë¥¼ ì‚­ì œí•´ ì£¼ëŠ” í•¨ìˆ˜
- capacity ë§Œí¼ ê³µê°„ ìœ ì§€
```c++
public:
	void clear()
		{
			if (_data)
			{
				delete[] _data;
				_data = new T[_capacity];	// allocator c++ ì•Œì•„ë³´ê¸°
			}

			_size = 0;
		}
```

5. `shrink_to_fit`
- sizeì— ë§ê²Œ capacityë¥¼ ìˆ˜ì •í•´ ì£¼ëŠ” í•¨ìˆ˜
```c++
public:
	void shrink_to_fit()
		{
			SetCapacity(_size);
		}
```

6. `[]`
- Random Accessë¥¼ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” ì—°ì‚°ì
```c++
public:
	T& operator[](const int pos) { return _data[pos]; }
```

7. `front`, `back`
- ë§¨ ì•, ë§¨ ë’¤ ì›ì†Œë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
```c++
public:
	T& front() { return _data[0]; } // ë§¨ ì• ì›ì†Œ
	T& back() { return _data[_size - 1]; } // ë§¨ ë’¤ ì›ì†Œ
```

8. `empty`
- ì›ì†Œê°€ ì—†ëŠ” ìƒíƒœì¸ì§€ íŒë³„í•´ ì£¼ëŠ” í•¨ìˆ˜
```c++
public:
	bool empty() { return _size == 0; }
```

9. `capacity`, `size`
- ë²¡í„°ì˜ ìš©ëŸ‰ê³¼ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
```c++
public:
	int size() { return _size; }
	int capacity() { return _capacity; }
```

## 5. capacity ë³€ê²½ í•¨ìˆ˜
```c++
private:
	void SetCapacity(int capacity)
	{
		_capacity = capacity;

		T* newData = new T[_capacity];

		// ë©”ëª¨ë¦¬ ì´ë™ ë° ë³µì‚¬
		for (int i = 0; i < _size; ++i)
			newData[i] = _data[i];

		if (_data)
			delete[] _data;

		_data = newData;
	}
```